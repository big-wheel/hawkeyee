!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("leancloud-storage/live-query"),require("markme")):"function"==typeof define&&define.amd?define(["leancloud-storage/live-query","markme"],e):t.MarkmeLeancloud=e(t.AV,t.Markme)}(this,function(t,e){"use strict";function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;var o=n(function(t){!function(e){var r,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",s=e.regeneratorRuntime;if(s)t.exports=s;else{(s=e.regeneratorRuntime=t.exports).wrap=w;var f="suspendedStart",l="suspendedYield",h="executing",p="completed",v={},d={};d[a]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==n&&o.call(g,a)&&(d=g);var m=O.prototype=b.prototype=Object.create(d);x.prototype=m.constructor=O,O.constructor=x,O[c]=x.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(m),t},s.awrap=function(t){return{__await:t}},j(L.prototype),L.prototype[u]=function(){return this},s.AsyncIterator=L,s.async=function(t,e,r,n){var o=new L(w(t,e,r,n));return s.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},j(m),m[c]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},s.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},s.values=T,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return u.type="throw",u.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function w(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n=f;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return M()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=k(a,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=_(t,e,r);if("normal"===c.type){if(n=r.done?p:l,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=p,r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function _(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function b(){}function x(){}function O(){}function j(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function L(t){var e;this._invoke=function(r,n){function i(){return new Promise(function(e,i){!function e(r,n,i,a){var u=_(t[r],t,n);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==typeof s&&o.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(s).then(function(t){c.value=t,i(c)},a)}a(u.arg)}(r,n,e,i)})}return e=e?e.then(i,i):i()}}function k(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,k(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=_(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())}),i=function(){return this}()||Function("return this")(),a=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,u=a&&i.regeneratorRuntime;i.regeneratorRuntime=void 0;var c=o;if(a)i.regeneratorRuntime=u;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}var s=c,f=r(n(function(t,e){e.__esModule=!0,e.default=function(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}})),l=n(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),h=n(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),p=(h.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),v=function(t,e,r){if(p(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},d=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=function(t){if(!d(t))throw TypeError(t+" is not an object!");return t},g=function(t){try{return!!t()}catch(t){return!0}},m=!g(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),w=l.document,_=d(w)&&d(w.createElement),b=function(t){return _?w.createElement(t):{}},x=!m&&!g(function(){return 7!=Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a}),O=Object.defineProperty,j={f:m?Object.defineProperty:function(t,e,r){if(y(t),e=function(t,e){if(!d(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!d(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!d(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!d(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}(e,!0),y(r),x)try{return O(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},L=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},k=m?function(t,e,r){return j.f(t,e,L(1,r))}:function(t,e,r){return t[e]=r,t},S={}.hasOwnProperty,P=function(t,e){return S.call(t,e)},E=function(t,e,r){var n,o,i,a=t&E.F,u=t&E.G,c=t&E.S,s=t&E.P,f=t&E.B,p=t&E.W,d=u?h:h[e]||(h[e]={}),y=d.prototype,g=u?l:c?l[e]:(l[e]||{}).prototype;for(n in u&&(r=e),r)(o=!a&&g&&void 0!==g[n])&&P(d,n)||(i=o?g[n]:r[n],d[n]=u&&"function"!=typeof g[n]?r[n]:f&&o?v(i,l):p&&g[n]==i?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):s&&"function"==typeof i?v(Function.call,i):i,s&&((d.virtual||(d.virtual={}))[n]=i,t&E.R&&y&&!y[n]&&k(y,n,i)))};E.F=1,E.G=2,E.S=4,E.P=8,E.B=16,E.W=32,E.U=64,E.R=128;var T,M=E,A={}.toString,F=function(t){return A.call(t).slice(8,-1)},R=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==F(t)?t.split(""):Object(t)},I=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},N=function(t){return R(I(t))},G=Math.ceil,C=Math.floor,q=function(t){return isNaN(t=+t)?0:(t>0?C:G)(t)},Q=Math.min,V=function(t){return t>0?Q(q(t),9007199254740991):0},D=Math.max,W=Math.min,B=l["__core-js_shared__"]||(l["__core-js_shared__"]={}),H=function(t){return B[t]||(B[t]={})},J=0,U=Math.random(),K=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++J+U).toString(36))},Y=H("keys"),z=function(t){return Y[t]||(Y[t]=K(t))},X=(T=!1,function(t,e,r){var n,o=N(t),i=V(o.length),a=function(t,e){return(t=q(t))<0?D(t+e,0):W(t,e)}(r,i);if(T&&e!=e){for(;i>a;)if((n=o[a++])!=n)return!0}else for(;i>a;a++)if((T||a in o)&&o[a]===e)return T||a||0;return!T&&-1}),Z=z("IE_PROTO"),$="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),tt=Object.keys||function(t){return function(t,e){var r,n=N(t),o=0,i=[];for(r in n)r!=Z&&P(n,r)&&i.push(r);for(;e.length>o;)P(n,r=e[o++])&&(~X(i,r)||i.push(r));return i}(t,$)},et={f:Object.getOwnPropertySymbols},rt={f:{}.propertyIsEnumerable},nt=function(t){return Object(I(t))},ot=Object.assign,it=!ot||g(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=ot({},t)[r]||Object.keys(ot({},e)).join("")!=n})?function(t,e){for(var r=nt(t),n=arguments.length,o=1,i=et.f,a=rt.f;n>o;)for(var u,c=R(arguments[o++]),s=i?tt(c).concat(i(c)):tt(c),f=s.length,l=0;f>l;)a.call(c,u=s[l++])&&(r[u]=c[u]);return r}:ot;M(M.S+M.F,"Object",{assign:it});var at=h.Object.assign,ut=n(function(t){t.exports={default:at,__esModule:!0}});r(ut);var ct=r(n(function(t,e){e.__esModule=!0;var r,n=(r=ut)&&r.__esModule?r:{default:r};e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}})),st=k,ft={},lt=m?Object.defineProperties:function(t,e){y(t);for(var r,n=tt(e),o=n.length,i=0;o>i;)j.f(t,r=n[i++],e[r]);return t},ht=l.document,pt=ht&&ht.documentElement,vt=z("IE_PROTO"),dt=function(){},yt=function(){var t,e=b("iframe"),r=$.length;for(e.style.display="none",pt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),yt=t.F;r--;)delete yt.prototype[$[r]];return yt()},gt=Object.create||function(t,e){var r;return null!==t?(dt.prototype=y(t),r=new dt,dt.prototype=null,r[vt]=t):r=yt(),void 0===e?r:lt(r,e)},mt=n(function(t){var e=H("wks"),r=l.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:K)("Symbol."+t))}).store=e}),wt=j.f,_t=mt("toStringTag"),bt=function(t,e,r){t&&!P(t=r?t:t.prototype,_t)&&wt(t,_t,{configurable:!0,value:e})},xt={};k(xt,mt("iterator"),function(){return this});var Ot,jt=function(t,e,r){t.prototype=gt(xt,{next:L(1,r)}),bt(t,e+" Iterator")},Lt=z("IE_PROTO"),kt=Object.prototype,St=Object.getPrototypeOf||function(t){return t=nt(t),P(t,Lt)?t[Lt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?kt:null},Pt=mt("iterator"),Et=!([].keys&&"next"in[].keys()),Tt=function(){return this},Mt=function(t,e,r,n,o,i,a){jt(r,e,n);var u,c,s,f=function(t){if(!Et&&t in v)return v[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=e+" Iterator",h="values"==o,p=!1,v=t.prototype,d=v[Pt]||v["@@iterator"]||o&&v[o],y=d||f(o),g=o?h?f("entries"):y:void 0,m="Array"==e&&v.entries||d;if(m&&(s=St(m.call(new t)))!==Object.prototype&&s.next&&bt(s,l,!0),h&&d&&"values"!==d.name&&(p=!0,y=function(){return d.call(this)}),a&&(Et||p||!v[Pt])&&k(v,Pt,y),ft[e]=y,ft[l]=Tt,o)if(u={values:h?y:f("values"),keys:i?y:f("keys"),entries:g},a)for(c in u)c in v||st(v,c,u[c]);else M(M.P+M.F*(Et||p),e,u);return u},At=(Ot=!0,function(t,e){var r,n,o=String(I(t)),i=q(e),a=o.length;return i<0||i>=a?Ot?"":void 0:(r=o.charCodeAt(i))<55296||r>56319||i+1===a||(n=o.charCodeAt(i+1))<56320||n>57343?Ot?o.charAt(i):r:Ot?o.slice(i,i+2):n-56320+(r-55296<<10)+65536});Mt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=At(e,r),this._i+=t.length,{value:t,done:!1})});var Ft=function(t,e){return{value:e,done:!!t}};Mt(Array,"Array",function(t,e){this._t=N(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,Ft(1)):Ft(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values");ft.Arguments=ft.Array;for(var Rt=mt("toStringTag"),It="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Nt=0;Nt<It.length;Nt++){var Gt=It[Nt],Ct=l[Gt],qt=Ct&&Ct.prototype;qt&&!qt[Rt]&&k(qt,Rt,Gt),ft[Gt]=ft.Array}var Qt,Vt,Dt,Wt=mt("toStringTag"),Bt="Arguments"==F(function(){return arguments}()),Ht=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Wt))?r:Bt?F(e):"Object"==(n=F(e))&&"function"==typeof e.callee?"Arguments":n},Jt=function(t,e,r,n){try{return n?e(y(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&y(o.call(t)),e}},Ut=mt("iterator"),Kt=Array.prototype,Yt=mt("iterator"),zt=h.getIteratorMethod=function(t){if(void 0!=t)return t[Yt]||t["@@iterator"]||ft[Ht(t)]},Xt=n(function(t){var e={},r={},n=t.exports=function(t,n,o,i,a){var u,c,s,f,l,h=a?function(){return t}:zt(t),p=v(o,i,n?2:1),d=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(void 0===(l=h)||ft.Array!==l&&Kt[Ut]!==l){for(s=h.call(t);!(c=s.next()).done;)if((f=Jt(s,p,c.value,n))===e||f===r)return f}else for(u=V(t.length);u>d;d++)if((f=n?p(y(c=t[d])[0],c[1]):p(t[d]))===e||f===r)return f};n.BREAK=e,n.RETURN=r}),Zt=mt("species"),$t=function(t,e){var r,n=y(t).constructor;return void 0===n||void 0==(r=y(n)[Zt])?e:p(r)},te=l.process,ee=l.setImmediate,re=l.clearImmediate,ne=l.MessageChannel,oe=l.Dispatch,ie=0,ae={},ue=function(){var t=+this;if(ae.hasOwnProperty(t)){var e=ae[t];delete ae[t],e()}},ce=function(t){ue.call(t.data)};ee&&re||(ee=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return ae[++ie]=function(){!function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}t.apply(r,e)}("function"==typeof t?t:Function(t),e)},Qt(ie),ie},re=function(t){delete ae[t]},"process"==F(te)?Qt=function(t){te.nextTick(v(ue,t,1))}:oe&&oe.now?Qt=function(t){oe.now(v(ue,t,1))}:ne?(Dt=(Vt=new ne).port2,Vt.port1.onmessage=ce,Qt=v(Dt.postMessage,Dt,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(Qt=function(t){l.postMessage(t+"","*")},l.addEventListener("message",ce,!1)):Qt="onreadystatechange"in b("script")?function(t){pt.appendChild(b("script")).onreadystatechange=function(){pt.removeChild(this),ue.call(t)}}:function(t){setTimeout(v(ue,t,1),0)});var se={set:ee,clear:re},fe=se.set,le=l.MutationObserver||l.WebKitMutationObserver,he=l.process,pe=l.Promise,ve="process"==F(he);var de={f:function(t){return new function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=p(e),this.reject=p(r)}(t)}},ye=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},ge=function(t,e){if(y(t),d(e)&&e.constructor===t)return e;var r=de.f(t);return(0,r.resolve)(e),r.promise},me=mt("species"),we=mt("iterator"),_e=!1;try{[7][we]().return=function(){_e=!0}}catch(t){}var be,xe,Oe,je,Le,ke,Se=se.set,Pe=function(){var t,e,r,n=function(){var n,o;for(ve&&(n=he.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(ve)r=function(){he.nextTick(n)};else if(!le||l.navigator&&l.navigator.standalone)if(pe&&pe.resolve){var o=pe.resolve();r=function(){o.then(n)}}else r=function(){fe.call(l,n)};else{var i=!0,a=document.createTextNode("");new le(n).observe(a,{characterData:!0}),r=function(){a.data=i=!i}}return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,r()),e=o}}(),Ee=l.TypeError,Te=l.process,Me=l.Promise,Ae="process"==Ht(Te),Fe=function(){},Re=xe=de.f,Ie=!!function(){try{var t=Me.resolve(1),e=(t.constructor={})[mt("species")]=function(t){t(Fe,Fe)};return(Ae||"function"==typeof PromiseRejectionEvent)&&t.then(Fe)instanceof e}catch(t){}}(),Ne=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},Ge=function(t,e){if(!t._n){t._n=!0;var r=t._c;Pe(function(){for(var n=t._v,o=1==t._s,i=0,a=function(e){var r,i,a,u=o?e.ok:e.fail,c=e.resolve,s=e.reject,f=e.domain;try{u?(o||(2==t._h&&Qe(t),t._h=1),!0===u?r=n:(f&&f.enter(),r=u(n),f&&(f.exit(),a=!0)),r===e.promise?s(Ee("Promise-chain cycle")):(i=Ne(r))?i.call(r,c,s):c(r)):s(n)}catch(t){f&&!a&&f.exit(),s(t)}};r.length>i;)a(r[i++]);t._c=[],t._n=!1,e&&!t._h&&Ce(t)})}},Ce=function(t){Se.call(l,function(){var e,r,n,o=t._v,i=qe(t);if(i&&(e=ye(function(){Ae?Te.emit("unhandledRejection",o,t):(r=l.onunhandledrejection)?r({promise:t,reason:o}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",o)}),t._h=Ae||qe(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},qe=function(t){return 1!==t._h&&0===(t._a||t._c).length},Qe=function(t){Se.call(l,function(){var e;Ae?Te.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},Ve=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Ge(e,!0))},De=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Ee("Promise can't be resolved itself");(e=Ne(t))?Pe(function(){var n={_w:r,_d:!1};try{e.call(t,v(De,n,1),v(Ve,n,1))}catch(t){Ve.call(n,t)}}):(r._v=t,r._s=1,Ge(r,!1))}catch(t){Ve.call({_w:r,_d:!1},t)}}};Ie||(Me=function(t){!function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!")}(this,Me,"Promise","_h"),p(t),be.call(this);try{t(v(De,this,1),v(Ve,this,1))}catch(t){Ve.call(this,t)}},(be=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,r){for(var n in e)r&&t[n]?t[n]=e[n]:k(t,n,e[n]);return t}(Me.prototype,{then:function(t,e){var r=Re($t(this,Me));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ae?Te.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Ge(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Oe=function(){var t=new be;this.promise=t,this.resolve=v(De,t,1),this.reject=v(Ve,t,1)},de.f=Re=function(t){return t===Me||t===je?new Oe(t):xe(t)}),M(M.G+M.W+M.F*!Ie,{Promise:Me}),bt(Me,"Promise"),ke="function"==typeof h[Le="Promise"]?h[Le]:l[Le],m&&ke&&!ke[me]&&j.f(ke,me,{configurable:!0,get:function(){return this}}),je=h.Promise,M(M.S+M.F*!Ie,"Promise",{reject:function(t){var e=Re(this);return(0,e.reject)(t),e.promise}}),M(M.S+!0*M.F,"Promise",{resolve:function(t){return ge(this===je?Me:this,t)}}),M(M.S+M.F*!(Ie&&function(t,e){if(!e&&!_e)return!1;var r=!1;try{var n=[7],o=n[we]();o.next=function(){return{done:r=!0}},n[we]=function(){return o},t(n)}catch(t){}return r}(function(t){Me.all(t).catch(Fe)})),"Promise",{all:function(t){var e=this,r=Re(e),n=r.resolve,o=r.reject,i=ye(function(){var r=[],i=0,a=1;Xt(t,!1,function(t){var u=i++,c=!1;r.push(void 0),a++,e.resolve(t).then(function(t){c||(c=!0,r[u]=t,--a||n(r))},o)}),--a||n(r)});return i.e&&o(i.v),r.promise},race:function(t){var e=this,r=Re(e),n=r.reject,o=ye(function(){Xt(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}}),M(M.P+M.R,"Promise",{finally:function(t){var e=$t(this,h.Promise||l.Promise),r="function"==typeof t;return this.then(r?function(r){return ge(e,t()).then(function(){return r})}:t,r?function(r){return ge(e,t()).then(function(){throw r})}:t)}}),M(M.S,"Promise",{try:function(t){var e=de.f(this),r=ye(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}});var We=h.Promise,Be=n(function(t){t.exports={default:We,__esModule:!0}});r(Be);var He=r(n(function(t,e){e.__esModule=!0;var r,n=(r=Be)&&r.__esModule?r:{default:r};e.default=function(t){return function(){var e=t.apply(this,arguments);return new n.default(function(t,r){return function o(i,a){try{var u=e[i](a),c=u.value}catch(t){return void r(t)}if(!u.done)return n.default.resolve(c).then(function(t){o("next",t)},function(t){o("throw",t)});t(c)}("next")})}}}));return function(){var r=He(s.mark(function r(n){var o,i,a,u,c,l,h=this,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=function(t){var e=t.toJSON(),r=e.data,n=f(e,["data"]);return ct({},n,r)},p=ct({enableInitialFill:!0,key:location.origin+location.pathname,AVOptions:{},enableLiveQuery:!0},p),t.applicationId=null,t.init(p.AVOptions),o=t.Object.extend("Markme"),i=e(n,p),u={set:function(){var e=He(s.mark(function e(r,n,i){var a,u;return s.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(r,n);case 2:return a=e.sent,u=void 0,(u=a&&a.objectId?t.Object.createWithoutData("Markme",a.objectId):new o).set("id",n),u.set("ukey",p.key),u.set("type",r),u.set("data",i),e.abrupt("return",u.save());case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),get:function(){var e=He(s.mark(function e(r,n){var o;return s.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new t.Query("Markme")).equalTo("type",r),o.equalTo("id",n),o.equalTo("ukey",p.key),e.next=6,o.find();case 6:return e.t0=a,e.abrupt("return",e.sent.map(e.t0)[0]);case 8:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),remove:function(){var e=He(s.mark(function e(r,n){var o;return s.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(r,n);case 2:if(!(o=e.sent).objectId){e.next=5;break}return e.abrupt("return",t.Query.doCloudQuery("delete from Markme where objectId="+JSON.stringify(o.objectId)));case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),getLiveQuery:function(e){var r=new t.Query("Markme");return r.equalTo("type",e),r.equalTo("ukey",p.key),r},getAll:function(){var t=He(s.mark(function t(e){var r;return s.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.getLiveQuery(e),t.next=3,r.find();case 3:return t.t0=a,t.abrupt("return",t.sent.map(t.t0));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getTotal:function(){var e=He(s.mark(function e(r){var n;return s.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new t.Query("Markme")).equalTo("type",r),e.next=4,n.find();case 4:return e.t0=a,e.abrupt("return",e.sent.map(e.t0));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},!p.enableLiveQuery){r.next=13;break}return c=u.getLiveQuery("highlight"),r.next=11,c.subscribe();case 11:r.sent.on("create",function(t){(t=t.toJSON()).id&&t.data&&i.highlight.fill(ct({id:t.id},t.data))}).on("update",function(t){var e=(t=t.toJSON()).data||{},r=e.words,n=e.color;t.id&&i.highlight.change(t.id,{color:n,words:r})}).on("delete",function(t){t=t.toJSON(),i.highlight.remove(t.id)});case 13:if(i.on("highlight-add",function(){var t=He(s.mark(function t(e){var r=e.id,n=f(e,["id"]);return s.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.warn("highlight-add"),t.next=3,u.set("highlight",r,n);case 3:case"end":return t.stop()}},t,h)}));return function(e){return t.apply(this,arguments)}}()).on("highlight-remove",function(){var t=He(s.mark(function t(e){return s.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:u.remove("highlight",e);case 1:case"end":return t.stop()}},t,h)}));return function(e){return t.apply(this,arguments)}}()).on("highlight-change:words",function(){var t=He(s.mark(function t(e){var r;return s.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.warn("highlight-change:words"),t.next=3,u.get("highlight",e.id);case 3:if(!(r=t.sent)){t.next=8;break}return r.words=e.words,t.next=8,u.set("highlight",e.id,r);case 8:case"end":return t.stop()}},t,h)}));return function(e){return t.apply(this,arguments)}}()).on("highlight-change:color",function(){var t=He(s.mark(function t(e){var r;return s.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.warn("highlight-change:color"),t.next=3,u.get("highlight",e.id);case 3:if(!(r=t.sent)){t.next=8;break}return r.color=e.color,t.next=8,u.set("highlight",e.id,r);case 8:case"end":return t.stop()}},t,h)}));return function(e){return t.apply(this,arguments)}}()).on("highlight-match-fail",function(){var t=He(s.mark(function t(e){return s.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.remove("highlight",e);case 2:case"end":return t.stop()}},t,h)}));return function(e){return t.apply(this,arguments)}}()),!p.enableInitialFill){r.next=19;break}return r.next=17,u.getAll("highlight");case 17:l=r.sent,i.highlight.fill(l);case 19:return r.abrupt("return",i);case 20:case"end":return r.stop()}},r,this)}));return function(t){return r.apply(this,arguments)}}()});
//# sourceMappingURL=index.umd.min.js.map
