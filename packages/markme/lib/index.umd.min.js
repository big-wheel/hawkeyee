!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}})),n=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),i=e(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),o=(i.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),a=function(t,e,r){if(o(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}},c=function(t){return"object"==typeof t?null!==t:"function"==typeof t},u=function(t){if(!c(t))throw TypeError(t+" is not an object!");return t},s=function(t){try{return!!t()}catch(t){return!0}},f=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),l=n.document,h=c(l)&&c(l.createElement),d=function(t){return h?l.createElement(t):{}},p=!f&&!s(function(){return 7!=Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a}),v=Object.defineProperty,y={f:f?Object.defineProperty:function(t,e,r){if(u(t),e=function(t,e){if(!c(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!c(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!c(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!c(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}(e,!0),u(r),p)try{return v(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},g=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},m=f?function(t,e,r){return y.f(t,e,g(1,r))}:function(t,e,r){return t[e]=r,t},w={}.hasOwnProperty,b=function(t,e){return w.call(t,e)},_=function(t,e,r){var o,c,u,s=t&_.F,f=t&_.G,l=t&_.S,h=t&_.P,d=t&_.B,p=t&_.W,v=f?i:i[e]||(i[e]={}),y=v.prototype,g=f?n:l?n[e]:(n[e]||{}).prototype;for(o in f&&(r=e),r)(c=!s&&g&&void 0!==g[o])&&b(v,o)||(u=c?g[o]:r[o],v[o]=f&&"function"!=typeof g[o]?r[o]:d&&c?a(u,n):p&&g[o]==u?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(u):h&&"function"==typeof u?a(Function.call,u):u,h&&((v.virtual||(v.virtual={}))[o]=u,t&_.R&&y&&!y[o]&&m(y,o,u)))};_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128;var x,k=_,L={}.toString,S=function(t){return L.call(t).slice(8,-1)},E=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==S(t)?t.split(""):Object(t)},O=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},j=function(t){return E(O(t))},P=Math.ceil,T=Math.floor,A=function(t){return isNaN(t=+t)?0:(t>0?T:P)(t)},C=Math.min,M=function(t){return t>0?C(A(t),9007199254740991):0},N=Math.max,F=Math.min,R=n["__core-js_shared__"]||(n["__core-js_shared__"]={}),q=function(t){return R[t]||(R[t]={})},G=0,I=Math.random(),D=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++G+I).toString(36))},H=q("keys"),V=function(t){return H[t]||(H[t]=D(t))},B=(x=!1,function(t,e,r){var n,i=j(t),o=M(i.length),a=function(t,e){return(t=A(t))<0?N(t+e,0):F(t,e)}(r,o);if(x&&e!=e){for(;o>a;)if((n=i[a++])!=n)return!0}else for(;o>a;a++)if((x||a in i)&&i[a]===e)return x||a||0;return!x&&-1}),U=V("IE_PROTO"),W="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(t){return function(t,e){var r,n=j(t),i=0,o=[];for(r in n)r!=U&&b(n,r)&&o.push(r);for(;e.length>i;)b(n,r=e[i++])&&(~B(o,r)||o.push(r));return o}(t,W)},z={f:Object.getOwnPropertySymbols},J={f:{}.propertyIsEnumerable},K=function(t){return Object(O(t))},Y=Object.assign,X=!Y||s(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=Y({},t)[r]||Object.keys(Y({},e)).join("")!=n})?function(t,e){for(var r=K(t),n=arguments.length,i=1,o=z.f,a=J.f;n>i;)for(var c,u=E(arguments[i++]),s=o?Q(u).concat(o(u)):Q(u),f=s.length,l=0;f>l;)a.call(u,c=s[l++])&&(r[c]=u[c]);return r}:Y;k(k.S+k.F,"Object",{assign:X});var Z=i.Object.assign,$=e(function(t){t.exports={default:Z,__esModule:!0}});t($);var tt=t(e(function(t,e){e.__esModule=!0;var r,n=(r=$)&&r.__esModule?r:{default:r};e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}})),et=e(function(t){!function(e){var r,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",s=e.regeneratorRuntime;if(s)t.exports=s;else{(s=e.regeneratorRuntime=t.exports).wrap=w;var f="suspendedStart",l="suspendedYield",h="executing",d="completed",p={},v={};v[a]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==n&&i.call(g,a)&&(v=g);var m=k.prototype=_.prototype=Object.create(v);x.prototype=m.constructor=k,k.constructor=x,k[u]=x.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(m),t},s.awrap=function(t){return{__await:t}},L(S.prototype),S.prototype[c]=function(){return this},s.AsyncIterator=S,s.async=function(t,e,r,n){var i=new S(w(t,e,r,n));return s.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},L(m),m[u]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},s.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},s.values=T,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return c.type="throw",c.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;j(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),p}}}function w(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),a=new P(n||[]);return o._invoke=function(t,e,r){var n=f;return function(i,o){if(n===h)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return A()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=b(t,e,r);if("normal"===u.type){if(n=r.done?d:l,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(t,r,a),o}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function _(){}function x(){}function k(){}function L(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(r,n){function o(){return new Promise(function(e,o){!function e(r,n,o,a){var c=b(t[r],t,n);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&i.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(s).then(function(t){u.value=t,o(u)},a)}a(c.arg)}(r,n,e,o)})}return e=e?e.then(o,o):o()}}function E(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,E(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=b(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())}),rt=function(){return this}()||Function("return this")(),nt=rt.regeneratorRuntime&&Object.getOwnPropertyNames(rt).indexOf("regeneratorRuntime")>=0,it=nt&&rt.regeneratorRuntime;rt.regeneratorRuntime=void 0;var ot=et;if(nt)rt.regeneratorRuntime=it;else try{delete rt.regeneratorRuntime}catch(t){rt.regeneratorRuntime=void 0}var at=ot,ct=m,ut={},st=f?Object.defineProperties:function(t,e){u(t);for(var r,n=Q(e),i=n.length,o=0;i>o;)y.f(t,r=n[o++],e[r]);return t},ft=n.document,lt=ft&&ft.documentElement,ht=V("IE_PROTO"),dt=function(){},pt=function(){var t,e=d("iframe"),r=W.length;for(e.style.display="none",lt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),pt=t.F;r--;)delete pt.prototype[W[r]];return pt()},vt=Object.create||function(t,e){var r;return null!==t?(dt.prototype=u(t),r=new dt,dt.prototype=null,r[ht]=t):r=pt(),void 0===e?r:st(r,e)},yt=e(function(t){var e=q("wks"),r=n.Symbol,i="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=i&&r[t]||(i?r:D)("Symbol."+t))}).store=e}),gt=y.f,mt=yt("toStringTag"),wt=function(t,e,r){t&&!b(t=r?t:t.prototype,mt)&&gt(t,mt,{configurable:!0,value:e})},bt={};m(bt,yt("iterator"),function(){return this});var _t,xt=function(t,e,r){t.prototype=vt(bt,{next:g(1,r)}),wt(t,e+" Iterator")},kt=V("IE_PROTO"),Lt=Object.prototype,St=Object.getPrototypeOf||function(t){return t=K(t),b(t,kt)?t[kt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Lt:null},Et=yt("iterator"),Ot=!([].keys&&"next"in[].keys()),jt=function(){return this},Pt=function(t,e,r,n,i,o,a){xt(r,e,n);var c,u,s,f=function(t){if(!Ot&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=e+" Iterator",h="values"==i,d=!1,p=t.prototype,v=p[Et]||p["@@iterator"]||i&&p[i],y=v||f(i),g=i?h?f("entries"):y:void 0,w="Array"==e&&p.entries||v;if(w&&(s=St(w.call(new t)))!==Object.prototype&&s.next&&wt(s,l,!0),h&&v&&"values"!==v.name&&(d=!0,y=function(){return v.call(this)}),a&&(Ot||d||!p[Et])&&m(p,Et,y),ut[e]=y,ut[l]=jt,i)if(c={values:h?y:f("values"),keys:o?y:f("keys"),entries:g},a)for(u in c)u in p||ct(p,u,c[u]);else k(k.P+k.F*(Ot||d),e,c);return c},Tt=(_t=!0,function(t,e){var r,n,i=String(O(t)),o=A(e),a=i.length;return o<0||o>=a?_t?"":void 0:(r=i.charCodeAt(o))<55296||r>56319||o+1===a||(n=i.charCodeAt(o+1))<56320||n>57343?_t?i.charAt(o):r:_t?i.slice(o,o+2):n-56320+(r-55296<<10)+65536});Pt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=Tt(e,r),this._i+=t.length,{value:t,done:!1})});var At=function(t,e){return{value:e,done:!!t}};Pt(Array,"Array",function(t,e){this._t=j(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,At(1)):At(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values");ut.Arguments=ut.Array;for(var Ct=yt("toStringTag"),Mt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Nt=0;Nt<Mt.length;Nt++){var Ft=Mt[Nt],Rt=n[Ft],qt=Rt&&Rt.prototype;qt&&!qt[Ct]&&m(qt,Ct,Ft),ut[Ft]=ut.Array}var Gt,It,Dt,Ht=yt("toStringTag"),Vt="Arguments"==S(function(){return arguments}()),Bt=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ht))?r:Vt?S(e):"Object"==(n=S(e))&&"function"==typeof e.callee?"Arguments":n},Ut=function(t,e,r,n){try{return n?e(u(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&u(i.call(t)),e}},Wt=yt("iterator"),Qt=Array.prototype,zt=yt("iterator"),Jt=i.getIteratorMethod=function(t){if(void 0!=t)return t[zt]||t["@@iterator"]||ut[Bt(t)]},Kt=e(function(t){var e={},r={},n=t.exports=function(t,n,i,o,c){var s,f,l,h,d,p=c?function(){return t}:Jt(t),v=a(i,o,n?2:1),y=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(void 0===(d=p)||ut.Array!==d&&Qt[Wt]!==d){for(l=p.call(t);!(f=l.next()).done;)if((h=Ut(l,v,f.value,n))===e||h===r)return h}else for(s=M(t.length);s>y;y++)if((h=n?v(u(f=t[y])[0],f[1]):v(t[y]))===e||h===r)return h};n.BREAK=e,n.RETURN=r}),Yt=yt("species"),Xt=function(t,e){var r,n=u(t).constructor;return void 0===n||void 0==(r=u(n)[Yt])?e:o(r)},Zt=n.process,$t=n.setImmediate,te=n.clearImmediate,ee=n.MessageChannel,re=n.Dispatch,ne=0,ie={},oe=function(){var t=+this;if(ie.hasOwnProperty(t)){var e=ie[t];delete ie[t],e()}},ae=function(t){oe.call(t.data)};$t&&te||($t=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return ie[++ne]=function(){!function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}t.apply(r,e)}("function"==typeof t?t:Function(t),e)},Gt(ne),ne},te=function(t){delete ie[t]},"process"==S(Zt)?Gt=function(t){Zt.nextTick(a(oe,t,1))}:re&&re.now?Gt=function(t){re.now(a(oe,t,1))}:ee?(Dt=(It=new ee).port2,It.port1.onmessage=ae,Gt=a(Dt.postMessage,Dt,1)):n.addEventListener&&"function"==typeof postMessage&&!n.importScripts?(Gt=function(t){n.postMessage(t+"","*")},n.addEventListener("message",ae,!1)):Gt="onreadystatechange"in d("script")?function(t){lt.appendChild(d("script")).onreadystatechange=function(){lt.removeChild(this),oe.call(t)}}:function(t){setTimeout(a(oe,t,1),0)});var ce={set:$t,clear:te},ue=ce.set,se=n.MutationObserver||n.WebKitMutationObserver,fe=n.process,le=n.Promise,he="process"==S(fe);var de={f:function(t){return new function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=o(e),this.reject=o(r)}(t)}},pe=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},ve=function(t,e){if(u(t),c(e)&&e.constructor===t)return e;var r=de.f(t);return(0,r.resolve)(e),r.promise},ye=yt("species"),ge=yt("iterator"),me=!1;try{[7][ge]().return=function(){me=!0}}catch(t){}var we,be,_e,xe,ke,Le,Se=ce.set,Ee=function(){var t,e,r,i=function(){var n,i;for(he&&(n=fe.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(he)r=function(){fe.nextTick(i)};else if(!se||n.navigator&&n.navigator.standalone)if(le&&le.resolve){var o=le.resolve();r=function(){o.then(i)}}else r=function(){ue.call(n,i)};else{var a=!0,c=document.createTextNode("");new se(i).observe(c,{characterData:!0}),r=function(){c.data=a=!a}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}(),Oe=n.TypeError,je=n.process,Pe=n.Promise,Te="process"==Bt(je),Ae=function(){},Ce=be=de.f,Me=!!function(){try{var t=Pe.resolve(1),e=(t.constructor={})[yt("species")]=function(t){t(Ae,Ae)};return(Te||"function"==typeof PromiseRejectionEvent)&&t.then(Ae)instanceof e}catch(t){}}(),Ne=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},Fe=function(t,e){if(!t._n){t._n=!0;var r=t._c;Ee(function(){for(var n=t._v,i=1==t._s,o=0,a=function(e){var r,o,a,c=i?e.ok:e.fail,u=e.resolve,s=e.reject,f=e.domain;try{c?(i||(2==t._h&&Ge(t),t._h=1),!0===c?r=n:(f&&f.enter(),r=c(n),f&&(f.exit(),a=!0)),r===e.promise?s(Oe("Promise-chain cycle")):(o=Ne(r))?o.call(r,u,s):u(r)):s(n)}catch(t){f&&!a&&f.exit(),s(t)}};r.length>o;)a(r[o++]);t._c=[],t._n=!1,e&&!t._h&&Re(t)})}},Re=function(t){Se.call(n,function(){var e,r,i,o=t._v,a=qe(t);if(a&&(e=pe(function(){Te?je.emit("unhandledRejection",o,t):(r=n.onunhandledrejection)?r({promise:t,reason:o}):(i=n.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=Te||qe(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},qe=function(t){return 1!==t._h&&0===(t._a||t._c).length},Ge=function(t){Se.call(n,function(){var e;Te?je.emit("rejectionHandled",t):(e=n.onrejectionhandled)&&e({promise:t,reason:t._v})})},Ie=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Fe(e,!0))},De=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Oe("Promise can't be resolved itself");(e=Ne(t))?Ee(function(){var n={_w:r,_d:!1};try{e.call(t,a(De,n,1),a(Ie,n,1))}catch(t){Ie.call(n,t)}}):(r._v=t,r._s=1,Fe(r,!1))}catch(t){Ie.call({_w:r,_d:!1},t)}}};Me||(Pe=function(t){!function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!")}(this,Pe,"Promise","_h"),o(t),we.call(this);try{t(a(De,this,1),a(Ie,this,1))}catch(t){Ie.call(this,t)}},(we=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,r){for(var n in e)r&&t[n]?t[n]=e[n]:m(t,n,e[n]);return t}(Pe.prototype,{then:function(t,e){var r=Ce(Xt(this,Pe));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Te?je.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Fe(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),_e=function(){var t=new we;this.promise=t,this.resolve=a(De,t,1),this.reject=a(Ie,t,1)},de.f=Ce=function(t){return t===Pe||t===xe?new _e(t):be(t)}),k(k.G+k.W+k.F*!Me,{Promise:Pe}),wt(Pe,"Promise"),Le="function"==typeof i[ke="Promise"]?i[ke]:n[ke],f&&Le&&!Le[ye]&&y.f(Le,ye,{configurable:!0,get:function(){return this}}),xe=i.Promise,k(k.S+k.F*!Me,"Promise",{reject:function(t){var e=Ce(this);return(0,e.reject)(t),e.promise}}),k(k.S+!0*k.F,"Promise",{resolve:function(t){return ve(this===xe?Pe:this,t)}}),k(k.S+k.F*!(Me&&function(t,e){if(!e&&!me)return!1;var r=!1;try{var n=[7],i=n[ge]();i.next=function(){return{done:r=!0}},n[ge]=function(){return i},t(n)}catch(t){}return r}(function(t){Pe.all(t).catch(Ae)})),"Promise",{all:function(t){var e=this,r=Ce(e),n=r.resolve,i=r.reject,o=pe(function(){var r=[],o=0,a=1;Kt(t,!1,function(t){var c=o++,u=!1;r.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,r[c]=t,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(t){var e=this,r=Ce(e),n=r.reject,i=pe(function(){Kt(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}}),k(k.P+k.R,"Promise",{finally:function(t){var e=Xt(this,i.Promise||n.Promise),r="function"==typeof t;return this.then(r?function(r){return ve(e,t()).then(function(){return r})}:t,r?function(r){return ve(e,t()).then(function(){throw r})}:t)}}),k(k.S,"Promise",{try:function(t){var e=de.f(this),r=pe(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}});var He=i.Promise,Ve=e(function(t){t.exports={default:He,__esModule:!0}});t(Ve);var Be=t(e(function(t,e){e.__esModule=!0;var r,n=(r=Ve)&&r.__esModule?r:{default:r};e.default=function(t){return function(){var e=t.apply(this,arguments);return new n.default(function(t,r){return function i(o,a){try{var c=e[o](a),u=c.value}catch(t){return void r(t)}if(!c.done)return n.default.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});t(u)}("next")})}}})),Ue=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}));k(k.S+k.F*!f,"Object",{defineProperty:y.f});var We=i.Object,Qe=function(t,e,r){return We.defineProperty(t,e,r)},ze=e(function(t){t.exports={default:Qe,__esModule:!0}});t(ze);var Je,Ke,Ye=t(e(function(t,e){e.__esModule=!0;var r,n=(r=ze)&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(t,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()})),Xe=(Je=Be(at.mark(function t(e,r,n,i){var o,a,c;i.target;return at.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.window.getSelection().isCollapsed){t.next=8;break}if(!nr.getSelectionContainsList(function(t){return dr(t)||dr(t.parentNode)})(e.window.getSelection()).length){t.next=5;break}return t.abrupt("return");case 5:o=nr.getLastRangePos(e.window),a=o.reset,c=o.pos,a&&ar.add("TEMP",a),c?n.show(c,e.highlightColors):n.hide();case 8:case"end":return t.stop()}},t,this)})),function(t,e,r,n){return Je.apply(this,arguments)}),Ze=(Ke=Be(at.mark(function t(e,r,n,i){var o,a,c,u,s;return at.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(o=i.target).classList.contains("mark-highlight-item")&&o.hasAttribute("data-mark-id")&&(a=o.getAttribute("data-mark-id"),c=o.style.backgroundColor,u=o.getAttribute("data-mark-words"),(s=e.highlightColors.slice().map(function(t){return ir(t)})).includes(ir(c))||s.push(ir(c)),n.show(tr.getPageOffset(o),s),n.selectColor(c,a),u&&n.setText(u)),e.highlight.disableDefaultClick&&i.preventDefault();case 3:case"end":return t.stop()}},t,this)})),function(t,e,r,n){return Ke.apply(this,arguments)}),$e=require("lodash.debounce"),tr=require("../../helper/dom"),er=require("rgb-hex"),rr=require("md5"),nr=require("../../helper/selection");function ir(t){try{return"#"+er(t)}catch(e){return t}}function or(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.color,n=e.words,i=e.uid,o=arguments[2];if(!dr(t)){var a=o.window.document.createElement("mark");a.className="mark-highlight-item",a.style.backgroundColor=r,a.setAttribute("data-mark-id",i),n&&a.setAttribute("data-mark-words",n),t.parentNode&&t.parentNode.replaceChild(a,t),a.appendChild(t)}}var ar=new(function(){function t(){Ue(this,t),this.mapQueue={}}return t.prototype.get=function(t){return this.mapQueue[t]},t.prototype.add=function(t,e){var r=this.get(t);r?r.push(e):this.mapQueue[t]=[e]},t.prototype.clear=function(t){this.reset(t,!1)},t.prototype.reset=function(t){var e=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===t)this.keys.map(function(t){return e.reset(t,r)});else{var n=this.get(t);n&&(r&&n.forEach(function(t){return t()}),n.splice(0,n.length))}},Ye(t,[{key:"keys",get:function(){return Object.keys(this.mapQueue)}}]),t}());function cr(t){if(tr.isText(t))for(var e=t.previousSibling;tr.isText(e);){t.textContent=e.textContent+t.textContent;var r=e.previousSibling;e.remove(),e=r}}function ur(t){if(tr.isText(t))for(var e=t.nextSibling;tr.isText(e);){t.textContent=t.textContent+e.textContent;var r=e.nextSibling;e.remove(),e=r}}function sr(t,e){return void 0===t?e.querySelectorAll("mark[data-mark-id]"):e.querySelectorAll("mark[data-mark-id="+JSON.stringify(t)+"]")}function fr(t,e,r){for(var n=e.words,i=e.color,o=sr(t,r),a=0;a<o.length;a++){var c=o[a];n&&c.setAttribute("data-mark-words",n),i&&(c.style.backgroundColor=ir(i))}}function lr(t,e){for(var r=sr(t,e),n=0;n<r.length;n++){var i=r[n];if(i.parentNode){var o=i.firstChild;i.parentNode.replaceChild(o,i),cr(o),ur(o)}}}function hr(t,e){var r,n=this,i=this,o=tr.getSingleDOM("div",void 0,document);return o.style.position="absolute",o.style.display="none",o.className="mark-highlight-popover",Object.assign(o,{hide:function(){this.style.display="none"},show:function(t,e){t&&(this.style.top=t.top+t.height+"px",this.style.left=t.left+t.width+"px"),e&&(this.innerHTML=e.map(function(t){return'<span class="mark-highlight-color" style="background-color: '+t+'"></span>'}).join("")),this.innerHTML+='<textarea placeholder="input your idea" style="display: none"></textarea>',this.style.display=""},selectColor:function(t,e){this._resetActive();for(var r=this.querySelectorAll(".mark-highlight-color"),n=0;n<r.length;n++)if(ir(r[n].style.backgroundColor)===ir(t))return e&&r[n].setAttribute("data-mark-id",e),r[n].classList.add("mark-highlight-active-color"),void this.setText("")},setText:function(e){var r=this,n=this.querySelector("textarea");n.style.display="",n.value=e,n.onblur=Be(at.mark(function e(){var a,c;return at.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.getActive()){e.next=3;break}return e.abrupt("return");case 3:return c=n.value,e.next=6,i.emit("highlight-change:words",{id:a.id,words:c});case 6:fr(a.id,{words:c},t);case 7:case"end":return e.stop()}},e,r)}))},_resetActive:function(){var t=this.querySelector(".mark-highlight-active-color");t&&(t.removeAttribute("data-mark-id"),t.classList.remove("mark-highlight-active-color"))},getActive:function(){var t=this.querySelector(".mark-highlight-active-color");return t&&{color:t.style.backgroundColor,id:t.getAttribute("data-mark-id")}}}),e.window.document.body.appendChild(o),o.addEventListener("click",(r=Be(at.mark(function r(i){var a,c,u,s,f,l,h,d;return at.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(a=i.target).classList.contains("mark-highlight-color")){r.next=36;break}if(c=a.style.backgroundColor,!a.classList.contains("mark-highlight-active-color")||!a.hasAttribute("data-mark-id")){r.next=12;break}return u=a.getAttribute("data-mark-id"),r.next=7,n.emit("highlight-remove",u);case 7:lr(u,t),o.hide(),a.classList.remove("mark-highlight-active-color"),r.next=36;break;case 12:if(!(s=o.getActive())){r.next=19;break}return r.next=16,n.emit("highlight-change:color",{id:s.id,color:c});case 16:return o.selectColor(c,s.id),fr(s.id,{color:c},t),r.abrupt("return");case 19:if(f=nr.getSelectionTextList(e.window.getSelection()),!f.find(function(t){return dr(t.parentNode)})){r.next=23;break}return r.abrupt("return");case 23:if(nr.getLastRangePos(e.window),f=nr.getSelectionTextSeqList(e.window.getSelection()),l=e.generateUid(),a.setAttribute("data-mark-id",l),h=f.filter(function(e){return t.contains(e)}),!(d=h.map(function(e){for(var r=e.parentNode,n=0,i=0;i<r.childNodes.length;i++){var o=r.childNodes[i];if(o===e)break;o&&"textContent"in o&&(n+=o.textContent.length)}return{offset:n,length:e.textContent.length,parentSelector:tr.getSelector(r,t)}}))||!d.length){r.next=32;break}return r.next=32,n.emit("highlight-add",{chunks:d,id:l,color:c});case 32:h.forEach(function(t){or(t,{uid:l,color:c},e)}),nr.removeRanges(window),ar.clear(),o.selectColor(c,l);case 36:case"end":return r.stop()}},r,n)})),function(t){return r.apply(this,arguments)})),o}function dr(t){return t&&t.classList&&t.classList.contains("mark-highlight-item")&&t.tagName&&"mark"===t.tagName.toLowerCase()}function pr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,r=t.id,n=t.words,i=t.chunks,o=void 0===i?[]:i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,c=arguments[2];if(Array.isArray(o)){var u=o.map(function(t){var e=t.parentSelector;return a.querySelector(e)});o.forEach(function(t,i){u[i]&&function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,r=t.words,n=t.id,i=t.offset,o=t.length,a=arguments[1],c=arguments[2],u=nr.sliceNode(a,{offset:i,length:o},c.window),s=(u.reset,u.nodes);s&&s[1]&&or(s[1],{uid:n,color:e,words:r},c)}(tt({color:e,id:r,words:n},t),u[i],c)})}}function vr(t,e,r,n){var i=n.target;i.classList.contains("mark-highlight-item")&&i.hasAttribute("data-mark-id")||(ar.reset("TEMP"),r.hide())}function yr(t,e){if(!window.getSelection)throw new Error("window.getSelection is not existed");var r=(e=tt({generateUid:function(){return rr((new Date).getTime()+Math.random()+"")},window:window,highlightColors:["#fff682","pink","#b2f0ff","#c57dff"]},e)).window.document,n=r.createElement("style");n.innerHTML=require("./style"),r.head.appendChild(n);var i=hr.call(this,t,e),o=$e(Xe,100).bind(this,e,t,i),a=$e(vr,100).bind(this,e,t,i),c=Ze.bind(this,e,t,i),u=function(t,e,r,n){var i=n.target;if(i.classList.contains("mark-highlight-item")&&i.hasAttribute("data-mark-id")){var o=e.querySelectorAll(".mark-highlight-item[data-mark-id="+JSON.stringify(i.getAttribute("data-mark-id"))+"]");Array.from(o).forEach(function(t){t.style.filter="brightness(85%)",t.style.webkitFilter="brightness(85%)",t.style.msFilter="brightness(85%)",t.style.mozFilter="brightness(85%)"})}}.bind(this,e,t,i),s=function(t,e,r,n){var i=n.target;if(i.classList.contains("mark-highlight-item")&&i.hasAttribute("data-mark-id")){var o=e.querySelectorAll("[data-mark-id="+JSON.stringify(i.getAttribute("data-mark-id"))+"]");Array.from(o).forEach(function(t){t.style.filter="",t.style.webkitFilter="",t.style.msFilter="",t.style.mozFilter=""})}}.bind(this,e,t,i);t.__reset&&t.__reset(),t.__reset=function(){i.parentNode&&i.parentNode.removeChild(i),t.removeEventListener("click",c),t.removeEventListener("mouseover",u),t.removeEventListener("mouseout",s),t.removeEventListener("mouseup",o),t.removeEventListener("mousedown",a),r.head.removeChild(n)},t.addEventListener("click",c),t.addEventListener("mouseover",u),t.addEventListener("mouseout",s),t.addEventListener("mouseup",o),t.addEventListener("mousedown",a),this.highlight={fill:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(Array.isArray(r))return r.forEach(function(t){return pr(t,n,e)});pr(r,n,e)},remove:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=i.getActive();return n&&n.id===e&&i.hide(),lr(e,r)},exit:function(){t.__reset&&t.__reset()}}}var gr=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then};var mr=e(function(t){const e="function"==typeof Symbol?Symbol("--[[await-event-emitter]]--"):"--[[await-event-emitter]]--";function r(t){if("string"!=typeof t&&"symbol"!=typeof t)throw new TypeError("type is not type of string or symbol!")}function n(t){if("function"!=typeof t)throw new TypeError("fn is not type of Function!")}function i(t){return{[e]:"always",fn:t}}function o(t){return{[e]:"once",fn:t}}function a(){this._events={}}a.prototype.on=a.prototype.addListener=function(t,e){return r(t),n(e),this._events[t]=this._events[t]||[],this._events[t].push(i(e)),this},a.prototype.once=function(t,e){return r(t),n(e),this._events[t]=this._events[t]||[],this._events[t].push(o(e)),this},a.prototype.prependListener=function(t,e){return r(t),n(e),this._events[t]=this._events[t]||[],this._events[t].unshift(i(e)),this},a.prototype.prependOnceListener=function(t,e){return r(t),n(e),this._events[t]=this._events[t]||[],this._events[t].unshift(o(e)),this},a.prototype.off=a.prototype.removeListener=function(t,e){r(t);const n=this.listeners(t);if("function"==typeof e){let r,i=!1;for(;(r=n.indexOf(e))>=0;)n.splice(r,1),this._events[t].splice(r,1),i=!0;return i}return delete this._events[t]},a.prototype.emit=async function(t,...n){r(t);const i=this.listeners(t),o=[];if(i&&i.length){for(let r=0;r<i.length;r++){const a=i[r],c=a.apply(this,n);gr(c)&&await c,"once"===this._events[t][r][e]&&o.push(a)}return o.forEach(e=>this.removeListener(t,e)),!0}return!1},a.prototype.emitSync=function(t,...n){r(t);const i=this.listeners(t),o=[];if(i&&i.length){for(let r=0;r<i.length;r++){const a=i[r];a.apply(this,n),"once"===this._events[t][r][e]&&o.push(a)}return o.forEach(e=>this.removeListener(t,e)),!0}return!1},a.prototype.listeners=function(t){return(this._events[t]||[]).map(t=>t.fn)},t.exports=a}),wr="undefined"!=typeof document,br={highlight:yr,badge:function(t){}};function _r(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t[e]=function(){var n=arguments;r.forEach(function(r){t[r]&&t[r][e]&&t[r][e].apply(t[r],n)})}}module.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!wr)throw new Error("mark should be used in browser environment.");var n=e=tt({enablePlugins:["highlight","badge"]},e,{highlight:tt({disableDefaultClick:!0},e.highlight)}),i=n.enablePlugins,o=r(n,["enablePlugins"]),a=new mr;return a.opt=e,a.addButton=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.title,t.icon,t.action},i.forEach(function(e){br[e]&&function(t,e){try{for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];t.apply(this,n)}catch(t){console.error(e,t.toString())}}.call(a,yr,e,t,o)}),_r(a,"exit",i),_r(a,"remove",i),a}});
